{% extends 'base.html' %}
{% block container %}

<div class="row">
    <div class="col-6">

        <div class="card">
            <div class="card-body">
                <span id="success"></span>
                <div  class="table-responsive">
                    <form method="post" action="">
                        {% csrf_token %}
                        <div class="row">

                            <div class="col-4">
                                <H4> Select KeyWord</H4>
                                {% for search_word in key %}
                                <input type="checkbox" name="select_word" value={{search_word}}>
                                <label for={search_word}}> {{search_word}}</label><br>
                                {% endfor %}
                            </div>

                            <div class="col-4">
                                  <H4 >Select User</H4>
                                {% for user_name in name %}
                                <input type="checkbox" name='select_user' value={{user_name}}>
                                <label for={user_name}}> {{user_name}}</label><br>
                                {% endfor %}
                            </div> <!-- end card -->

                            <div class="col-4">
                                 <H4 > Select Date</H4>
                                <input type="checkbox" name="yesterday" value='yesterday'>
                                <label for={yesterday}}> Yesterday</label><br>

                                <input type="checkbox" name="lastweek" value='lastweek'>
                                <label for={lastweek}}> Last Week</label><br>

                                <input type="checkbox" name="lastmonth" value='lastmonth'>
                                <label for={lastmonth}}> Last Month</label><br>

                                <div class="position-relative">
                                    <h4>Start Date</h4>
                                    <input type="date"  name = "start_date" value = {{start_date}} class="form-control"   >
                                    <br>
                                    <h4>End Date</h4>
                                    <input type="date" name="end_date"  value = {{end_date}} class="form-control"  >
                                    <br>
                                </div>
                            </div> <!-- end card -->
                            <div class="col-4">
                            <input type="submit" value="Submit">
                                 </div> <!-- end card -->
                        </div> <!-- end card -->
                    </form>

                </div> <!-- end .table-responsive-->
            </div> <!-- end card-body -->
        </div> <!-- end card -->
    </div> <!-- end col -->



    <div class="col-6">
        <div class="card">
            <div class="card-body">
                <span id="success"></span>
                <div  class="table-responsive">
                    <table class="table table-centered mb-0 test " id="grouptable">
                        <thead>
                        <tr>
                            <th>Search keyword</th>

                            <th>Search Time</th>
                        </tr>
                        </thead>

                        <tbody>
                        {% for word,count in final_result.items %}
                        <tr>
                            <td>  {{word}} </td>
                            {% for i in count %}
                            {% if forloop.last %}
                            <td>{{forloop.counter}}

                                {% if forloop.counter <= 1 %}
                                time
                                {% else %}
                                times
                                {% endif %}
                                {% endif %}
                            </td>
                            {% endfor %}

                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                </div> <!-- end .table-responsive-->
            </div> <!-- end card-body -->
        </div> <!-- end card -->
    </div> <!-- end col -->
</div> <!-- end row -->

<div class="row">
    <div class="col-6">
        <div class="card">
            <div class="card-body">
                <span id="success"></span>
                <div  class="table-responsive">
                    <table class="table table-centered mb-0 test " id="grouptable">
                        <thead>
                        <tr>
                            <th>User Name</th>
                            <th>Search Word</th>
                            <th>Search Time</th>
                        </tr>
                        </thead>

                        <tbody>
                        {% for user_result in result %}

                        <tr>
                            <td> {{user_result.user_name}}</td>
                            <td>  {{user_result.keyword}}</td>
                            <td>  {{user_result.searched_at}}</td>

                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                </div> <!-- end .table-responsive-->
            </div> <!-- end card-body -->
        </div> <!-- end card -->
    </div> <!-- end col -->


</div> <!-- end row -->



{% endblock container %}